# 네트워크 리포트 해석
네트워크 위상학(Network Toplogy 또는 Graph Theory)은 망의 관계와 부하를 설명하기에 훌륭한 도구입니다. 위상학이라고 덥석 용어를 던지니 왠지모를 벽이 느껴지는 듯 합니다. 복잡해보이는 이 학문은 실은 간단한 문제에서 시작됐습니다.

![쾨니히스베르크의 다리](http://mblogthumb2.phinf.naver.net/MjAxODA3MTNfMjk3/MDAxNTMxNDc5NTkyMTkx.iE2fwJHadMdpTBDP8ZU97UqhV3rOiqVIJE4Ug3C5R5Ug.CVxwmkOtlc8-CqIDcs_jFPDaoOre6iEsFC5VHowEYhkg.JPEG.galaxyenergy/1531479591997.jpg?type=w800)
<p align='center'>
[그림 1] 쾨니히스베르크의 다리건너기 문제
    </p>

프로이센의 쾨니히스베르크(지금의 러시아 칼리닌그라드)에는 7개의 다리가 있었습니다. 마을 사람들은 각 동네에 있는 친구들을 효율적으로 만나고 싶어했고, 이 문제는 자연스럽게 다음과 같은 문제로 변형됐습니다.

> 어느 곳에서든 다리를 건너기 시작하여 모든 다리를 한 차례씩 모두 건널 수 있겠는가?

이 문제는 1735년에 레온하르트 오일러가 [어떤 증명](https://ko.wikipedia.org/wiki/%EC%BE%A8%EB%8B%88%ED%9E%88%EC%8A%A4%EB%B2%A0%EB%A5%B4%ED%81%AC%EC%9D%98_%EB%8B%A4%EB%A6%AC_%EB%AC%B8%EC%A0%9C)을 내어 놓음으로써 종결됩니다. 그리고 이를 시작으로 점과 선의 관계를 밝히는 네트워크 위상학이 발전합니다. 네트워크 위상학은 점과 선의 학문입니다.

**우리는 모두 지구상의 점**이라는 이야기를 들어보셨을지 모르겠습니다. 여기서 점은 다른 점과 관계가 맺어지는가 하면, 끊어지기도 합니다. 이를 그림으로 표현하면 점과 선으로 된 어떤 형태가 드러납니다. 우리는 이것을 흔하게 *관계도*라고 부릅니다.


![아내의 유혹 관계도](http://cfs12.tistory.com/image/17/tistory/2009/02/03/22/14/4988433ad5368)
<p align='center'>
[그림 2] 아내의 유혹 관계도
</p>

관계는 일방적일수도, 쌍방일 수도 있습니다. 또한 관계는 긍정적일 수도 있고, 부정적일 수도 있습니다. 컴퓨터는 관계가 *긍정인지, 또는 부정인지* 판단하기 어려워합니다. 컴퓨터는 그저 대화가 누구로부터 시작됐으며, 누구를 호출하고 있으며, 호출당한 상대는 어떤 말을 했는지 저장하고 있을 뿐 입니다.

상단에 있는 **아내의 유혹** 포스터는 네트워크 위상학 시각화를 훌륭하게 잘 해낸 예라 할 수 있습니다. 주인공인 구은재(민소희)는 대부분의 등장인물들로부터 관계를 요청 받고 있습니다. 들어오는 화살표가 많은 것이 그 증거입니다. 구은재의 영역은 받은 화살표에 비례하여 크기가 커집니다. 이를 통해 감상자는 **아내의 유혹**에서 구은재(민소희)가 많은 인물들과 관계하고 있다는 것을 직관적으로 이해할 수 있습니다. 반대로 관계하고 있는 원이 작은 것은 관계의 정도가 낮다는 것을 의미합니다. **아내의 유혹**이 전개되는데 꼭 필요하고, 때로는 이야기가 전개되는데 **중추인물**이 되기도 하지만, 빈도가 높지 않은 인물들이 이에 해당됩니다.

주의할것은 **원의 크기가 작다**고 하여 **중요하지 않은 인물이 아니라는 것**입니다. 앞서 설명했듯 주변 인물은 이야기를 매끄럽게 진행하게 하며 때로는 중추적 역할로 네트워크 관계를 원활히 동작하게 합니다. 이는 1973년에 Granovetter가 논문으로 [증명한 바](https://sociology.stanford.edu/sites/default/files/publications/the_strength_of_weak_ties_and_exch_w-gans.pdf) 있습니다. [1](#Reference)

중요한 것은 관계의 크기가 아니라 망(map)의 연결 관계입니다. 원의 크기는 관계의 끈끈함을 보장하지만 전체 구조의 견고성을 해치기도 합니다. 따라서 관계도의 안전한 해석을 위해서는 원의 비중 뿐만이 아니라 나와 관계하는 인물들간 다양성을 고민해야 합니다.

## 개요
시각화된 네트워크 그래프를 해석하려면 간단한 용어를 기억해야 합니다.


![](http://mathworld.wolfram.com/images/eps-gif/GraphNodesEdges_1000.gif)
<p align='center'>
    [그림 3] 노드와 엣지를 설명하는 간단한 그래프
</p>

1. 노드(node 또는 vertex)

    노드는 재분배 지점 또는 종단점입니다. 이것은 사용자가 정의하는 무엇이든 될 수 있습니다. 노드는 국가가 될 수도 있고, 사람이 될 수 있으며, 분자가 될 수도, 원자, 전자가 될 수도 있습니다. 이것은 사용자가 관계로 정의할 수 있는 의미의 종단점입니다. 별자리를 이야기한다고 했을 때, 노드는 별을 의미합니다.
    
2. 엣지(edge 또는 간선, 변)

    엣지는 두 개의 노드를 잇는 선입니다. 이 선은 연결된 두 노드가 어떻게든 관계를 맺고 있음을 시각적으로 표현하기 위한 것입니다. 관계가 일방적이면 단방향(directed), 쌍방의 관계를 맺는 경우엔 양방향(undirected 또는 bidirected)의 선분으로 표현됩니다. 노드의 정의가 자유롭듯, 엣지의 정의 또한 자유롭습니다. 사람간 노드에서 엣지는 커뮤니케이션이 될 수도, 금액이 될 수도, 호감도가 될 수도 있습니다. 별자리에서 엣지는 별간에 그을 수 있는 선을 의미합니다.

3. 그래프(graph)

    노드와 엣지가 만나 쌍을 이루는 모양을 그래프라고 합니다. 관계에 의미를 갖는 최소 단위인 두 개의 노드와 한 개의 엣지부터 그래프라고 합니다. 그래프는 유한한 것을 표현하기 위한 수단이기 때문에 셈이 가능한 계(system)에서 사용할 수 있습니다. 별자리에서 그래프는 별자리가 완성되어 나타나는 표현 형태입니다.
    
## 대화분석
대화는 빠르게 흘러갑니다. 대화를 놓치지 않기 위해서 우리는 <font style='color:red'>@</font> 라는 태그를 달아 상대방에게 알림을 보내기도 합니다.


![](assets/태그.png)
<p align='center'>
    [그림 4] 태그를 달아 대화를 전달합니다
</p>

이렇게 놓치지 않는 대화가 생깁니다. 이때 대화는 <font style='color:skyblue'>@JaehyunAhn</font>으로 부터 시작되어 <font style='color:skyblue'>@대상</font>에게 전해집니다. 이 대화를 그래프의 관점에서 해석한다면 노드는 <font style='color:skyblue'>@JaehyunAhn</font>과 <font style='color:skyblue'>@대상</font>이고, 엣지는 <font style='color:skyblue'>@JaehyunAhn</font>으로 부터 <font style='color:skyblue'>@대상</font>에게 뻗는 방향이 있는 선이 될 것입니다.


![](assets/대화.png)
<p align='center'>
    [그림 5] @JaehyunAhn 이 @대상을 태그하여 대화한 관계를 그래프로 표현
</p>

이제 <font style='color:skyblue'>@대상</font>이 <font style='color:skyblue'>@JaehyunAhn</font> 뿐만 아니라 여러 사람으로부터 호출을 받았다고 가정해봅시다. 노드 입장에서 호출을 받은 횟수를 그래프 이론 용어로 인-디그리(in-degree)라고 하며, 호출을 한 횟수를 아웃-디그리(out-degree)라고 합니다. [그림 6]


![](assets/대화2.png)
<p align='center'>
    [그림 6] In-degree가 2인 노드를 시각화한 그래프
</p>

만약 그래프의 노드가 기하급수적으로 증가하게 되면 어떤 노드가 디그리가 높은지 직관적으로 판단할 수 없게 됩니다. 때문에 노드의 크기는 인-디그리의 횟수에 비례하여 키우는 방식을 사용하여, 그래프가 완성됐을 때 호출 빈도가 많은 사람들을 직관적으로 파악할 수 있도록 했습니다.


## 개인분석
다음은 개인 대화 분석 그래프 명령 실행 결과입니다.


![](assets/개인분석.png)
<p align='center'>
    [그림 7] 개인분석 결과 그래프
</p>

A 노드에 일반적으로 명령 실행자의 이름이 들어가 있습니다. 이 그래프는 명령 실행자가 **호출된** 행위와 명령 실행자가 타인을 **호출한** 행위를 누적하여 그려집니다. 때문에 일반적으로 명령 실행자는 A 노드에 위치하게 되며, A 노드를 중심으로하는 관계 그래프가 형성됩니다. 

노드 A뿐 아니라 B와 C, D 등 노드의 색은 각기 다릅니다. 이것은 인-디그리의 횟수에 따라 호출받은 횟수를 시각화 하기 위한 것으로, 그 범례는 [그림 7] 오른쪽에 테이프 형태로 컬러바를 표현하여 나타냈습니다. 컬러바 외에 표시한 숫자는 인-디그리의 상대적 차이를 나타내는 것으로, B 노드는 D 노드에 비해 약 4배 정도 호출 빈도가 잦다고 해석할 수 있습니다.

## 전체분석


## 거리분석
## 그래프 이론
### 클러스터
### 허브(centrality)
## 알고리즘
### 시각화 방식
#### 배치
https://en.wikipedia.org/wiki/Force-directed_graph_drawing
#### 색
color
# Reference
[1] Granovetter의 해당 논문은 약 5만 회가 넘게 인용이 된 고전 중의 고전입니다.
* https://networkx.github.io/
* https://api.slack.com/
* https://pypi.org/project/gevent/
* https://matplotlib.org/examples/color/colormaps_reference.html
* 책: 링크 바라바시